<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<style>  
    div.padded {  
      padding-top: 0px;  
      padding-right: 100px;  
      padding-bottom: 0.25in;  
      padding-left: 100px;  
    }  
  </style> 
<title>Chuqian  |  CS 184</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="style.css" media="screen" />
</head>
<body>
<br />
<h1 align="middle">Assignment 4: Len Simulator</h1>
    <h2 align="middle">Chuqian</h2>

    <div class="padded">
        <p>This project extends the pin-hole pathtracer by adding a lens between the sensor plane and the world. Part 1 implements ray tracing through the lenses, which gives some realistic camera effects such as depth of field. Part 2 implements autofocusing by evaluating how in focus a selected patch of image is on diffent sensor depths.</p>

    <h2 align="middle">Part 1: Ray Generation and Intersection</h2>
        In this part, I first implemented tracing through lenses using the vector form of Shell's law:
        <p align="middle"><pre align="middle">a^2 + b^2 = c^2</pre></p>
        
        <h3> Difference between pinhole camera and a lens system. </h3>
        <p><b>Depth of field</b> In pinhole camera, every point is in foucs. In lens model, things may go out of focus and become blur. This depth of field changes according aperture size, focal length and the distance of object  in the lens model.</p>
        <p> <b>Perspective effect</b>: In pinhole camera, there's no persepctive effect. In lens model, when wide-anlge and fisheye lens are used, there're distortions at peripheral caused by perspective effect.</p>
        <p> <b>Visual field</b>: In pinhole camera, the visual field only depends on the sensor size and sensor depth. In lens camera, the visual field may be wider of narrower depending on which type of lens you are using. (Wide-angle's visual field is wider and telephoto narrower)</p>


        <h3> Conjugate points on 4 lenses</h3>
        <div align="center">
            <table style="width=100%">
                <tr>
                    <td align="middle">
                    <img src="images/p1/lens/p1.png" width="480px" />
                    <figcaption align="middle"></figcaption>
                </tr>
                <tr>
                    <td align="middle">
                    <img src="images/p1/lens/p2.png" width="480px" />
                    <figcaption align="middle"></figcaption>
                </tr>
                <tr>
                    <td align="middle">
                    <img src="images/p1/lens/p3_1.png" width="480px" />
                    <figcaption align="middle"></figcaption>
                    <td align="middle">
                    <img src="images/p1/lens/p3_2.png" width="480px" />
                    <figcaption align="middle"></figcaption>
 
               </tr>
                <tr>
                    <td align="middle">
                    <img src="images/p1/lens/p4.png" width="480px" />
                    <figcaption align="middle"></figcaption>
                </tr>
            </table>
        </div>

        <h3>The parameters of the four lenses</h3>
        <p>I used raytracing to calculate the focal length, infinity focus sensor depth, close focus distance in front of the lens and close focus sensor depth.</p>
        <p align="middle"><pre align="middle">a^2 + b^2 = c^2</pre></p>
        <div align="center">
            <table style="width=100" border= "1px solid black" align="middle">
                <tr>
                    <td>Lens</td>
                    <td>focal length(mm)</td>
                    <td>infinity depth(mm)</td>
                    <td>close object distance(mm)</td>
                    <td>close sensor depth(mm)</td>
                    <td>lens info</td>
                </tr>
                <tr>
                    <td>#1</td>
                    <td>50.3581</td>
                    <td>51.2609</td>
                    <td>264.605</td>
                    <td>62.7566</td>
                    <td>D-GAUSS F/2 22deg HFOV</td>
                </tr>
                <tr>
                    <td>#2</td>
                    <td>22.0234</td>
                    <td>28.7634</td>
                    <td>109.048</td>
                    <td>34.5796</td>
                    <td>Wide-angle (38-degree) lens. Nakamura.</td>
                </tr>
                <tr>
                    <td>#3</td>
                    <td>249.566</td>
                    <td>188.758</td>
                    <td>1646.2</td>
                    <td>236.875</td>
                    <td>SIGLER Super achromate telephoto, EFL=254mm, F/5</td>
                </tr>
                <tr>
                    <td>#4</td>
                    <td>9.99116</td>
                    <td>28.7436</td>
                    <td>60.8501</td>
                    <td>31.1804</td>
                    <td>Muller 16mm/f4 155.9FOV fisheye lens</td>
                </tr>
                </table>
        </div>

        <h3>The inverse relationship between sensor depth and its world-side conjugate</h3>
        <div align="center">
            <table style="width=100%">
                <tr>
                    <td align="middle">
                    <img src="images/p1/plot/p1_sensor_world.png" width="480px" />
                    <figcaption align="middle"></figcaption>
                    <td align="middle">
                    <img src="images/p1/plot/p1_world_sensor.png" width="480px" />
                    <figcaption align="middle"></figcaption>
                </tr>
                <tr>
                    <td align="middle">
                    <img src="images/p1/plot/p2_sensor_world.png" width="480px" />
                    <figcaption align="middle"></figcaption>
                    <td align="middle">
                    <img src="images/p1/plot/p2_world_sensor.png" width="480px" />
                    <figcaption align="middle"></figcaption>
                </tr>
                <tr>
                    <td align="middle">
                    <img src="images/p1/plot/p3_sensor_world.png" width="480px" />
                    <figcaption align="middle"></figcaption>
                    <td align="middle">
                    <img src="images/p1/plot/p3_world_sensor.png" width="480px" />
                    <figcaption align="middle"></figcaption>
                </tr>
                <tr>
                    <td align="middle">
                    <img src="images/p1/plot/p4_sensor_world.png" width="480px" />
                    <figcaption align="middle"></figcaption>
                    <td align="middle">
                    <img src="images/p1/plot/p4_world_sensor.png" width="480px" />
                    <figcaption align="middle"></figcaption>
                </tr>
                
            </table>
        </div>

        <h3>Result</h3>
        <div align="center">
            <table style="width=100%">
                <tr>
                    <td align="middle">
                    <img src="images/p1/lens/p1.png" width="480px" />
                    <figcaption align="middle">CBlucy with 1024spp, 1spl and 100 bounce</figcaption>
                </tr>
            </table>
        </div>
        
        <p>Here is an example of how to include a simple formula:</p>
        <p align="middle"><pre align="middle">a^2 + b^2 = c^2</pre></p>
        <p>or, alternatively, you can include an SVG image of a LaTex formula.</p>
        <p>This time it's your job to copy-paste in the rest of the sections :)</p>


    <h2 align="middle">Part 2: Contrast-based autofocus</h2>
        In this part, I first implemented tracing through lenses using the vector form of Shell's law:
      

    <h2 align="middle">A Few Notes On Webpages</h2>
        <p>Here are a few problems students have encountered in the past. You will probably encounter these problems at some point, so don't wait until right before the deadline to check that everything is working. Test your website on the instructional machines early!</p>
        <ul>
        <li>Your main report page should be called index.html.</li>
        <li>Be sure to include and turn in all of the other files (such as images) that are linked in your report!</li>
        <li>Use only <em>relative</em> paths to files, such as <pre>"./images/image.jpg"</pre>
        Do <em>NOT</em> use absolute paths, such as <pre>"/Users/student/Desktop/image.jpg"</pre></li>
        <li>Pay close attention to your filename extensions. Remember that on UNIX systems (such as the instructional machines), capitalization matters. <pre>.png != .jpeg != .jpg != .JPG</pre>
        <li>Be sure to adjust the permissions on your files so that they are world readable. For more information on this please see this tutorial: <a href="http://www.grymoire.com/Unix/Permissions.html">http://www.grymoire.com/Unix/Permissions.html</a></li>
        <li>And again, test your website on the instructional machines early!</li>
</div>
</body>
</html>




